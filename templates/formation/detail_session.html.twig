{% extends "base.html.twig" %}

{% block bread %}
    <li class="breadcrumb-item"><a href="{{path("home")}}">Home</a></li>
    <li class="breadcrumb-item"><a href="{{path("sessions")}}">Sessions</a></li>
    <li class="breadcrumb-item active">{{session.intitule}}</li>
{% endblock %}
{% block body %}
<h1>Detail de la session : <strong>{{session.intitule}}</strong></h1>

<a class="btn btn-primary" href="{{path("stagiaires_in_session", {id: session.id})}}">Gerer les stagiaires</a>
<a class="btn btn-primary" href="{{path("session_programme", {id: session.id})}}">Gerer les modules</a>
<a class="btn btn-secondary" href="{{path("edit_session", {id: session.id})}}">Modifier la session</a>
<a class="btn btn-danger" href="{{path("delete_session", {id: session.id})}}">Delete</a>
<hr>

<p>
    Cette session a été créé par : {{session.user.fullname}}
</p>

<p>
    Du {{session.dateDebut | date("d/m/Y")}} au {{session.dateFin | date("d/m/Y")}}, soit {{session.sessionDuree.days * 7 }} heures <small>( basé sur 35 heures/semaine)</small>
</p>

<p>
    Dans cette formation il y a {{session.place - session.stagiaires | length}} place(s) restante(s), sur {{session.place}}. 
</p>
{% if session.stagiaires is empty %}
            <p>Il n'y a pas encore de stagiaire inscrit</p>
        {% else %}
            <p>Les stagiaires inscrits sont :</p>
            <ul>
                {% for stagiaire in session.stagiaires %}
                    <li>
                        {{stagiaire.fullname}}
                    </li>
                {% endfor %}
            </ul>
    {% endif %}

{% if session.programmes is empty %}
        <p>
            Le programme n'est pas défini
        </p>    
    {% else %}
        <p>
            Le programme de la session est :
        </p>
        <table class="table table-hover">
            <thead>
                <tr>
                    <th>Module</th>
                    <th>Durée</th>
                    <th>Categorie</th>
                </tr>
            </thead>
            <tbody>
                {% for programme in session.programmes %}
                <tr class="table-primary">
                    <td>{{programme.module.nom}}</td>
                    <td>{{programme.duree}} jour(s)</td>
                    <td>{{programme.module.categorie.nom}}</td>
                </tr>
                {% endfor %}        
            </tbody>
        </table>
        
{% endif %}

{% endblock %}